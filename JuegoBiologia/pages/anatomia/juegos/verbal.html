<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Razonamiento Verbal - Ciencias</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root{
      --p: #0077b6;
      --p-dark:#023e8a;
      --accent:#00b4d8;
      --bg1:#90e0ef;
      --bg2:#caf0f8;
      --ok:#22c55e;
      --bad:#ef4444;
      --card:#ffffff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#222;
      background: linear-gradient(135deg,var(--bg1),var(--bg2));
      display:flex;
      flex-direction:column;
      min-height:100vh;
    }
    header{
      background: var(--p);
      color:#fff;
      text-align:center;
      padding:1rem;
    }
    header h1{margin:0;font-size:clamp(1.2rem,2.8vw,1.8rem)}
    header p{margin:.2rem 0 0;opacity:.95}

    /* Pantalla inicial */
    #inicio{
      flex:1; display:flex; align-items:center; justify-content:center; padding:1rem;
    }
    .card{
      width:min(680px,92vw);
      background:var(--card);
      border-radius:16px;
      padding:1.4rem;
      box-shadow: 0 10px 24px rgba(0,0,0,.15);
      text-align:center;
    }
    .card h2{color:var(--p);margin:.2rem 0 .8rem}
    .card p{margin:.4rem 0}
    .btn{
      background:var(--p);
      color:#fff;
      border:none;
      padding:.85rem 1.2rem;
      border-radius:12px;
      font-weight:700;
      cursor:pointer;
      transition:.2s transform,.2s background;
      touch-action: manipulation;
    }
    .btn:active{transform:scale(.98)}
    .btn:hover{background:var(--p-dark)}
    .btn.alt{background:#009688}
    .btn.alt:hover{background:#00796B}

    /* Vista niveles */
    #levelsView{display:none; padding:1rem; text-align:center}
    .levels{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(110px,1fr));
      gap:1rem;
      width:min(900px,94vw);
      margin:1rem auto;
    }
    .level{
      background:#e0fbfc;
      border:2px solid var(--accent);
      color:#055160;
      border-radius:16px;
      padding:1.1rem .6rem;
      font-weight:800;
      cursor:pointer;
      transition:.2s transform,.2s box-shadow;
      user-select:none;
    }
    .level:hover{transform:translateY(-2px); box-shadow:0 8px 18px rgba(0,0,0,.12)}
    .level.locked{background:#ddd; border-color:#bbb; color:#666; cursor:not-allowed; box-shadow:none; transform:none}

    /* Vista preguntas */
    #content{
      display:none;
      width:min(900px,94vw);
      margin:1rem auto 5.2rem;
      background:#fff;
      border-radius:16px;
      padding:1rem;
      box-shadow:0 10px 24px rgba(0,0,0,.15);
    }
    #levelTitle{margin:.2rem 0 .6rem; color:var(--p)}
    #text{
      background:#f8fafc;
      border:1px solid #e5e7eb;
      border-radius:12px;
      padding:1rem;
      line-height:1.5;
    }
    .controls{display:flex; flex-wrap:wrap; gap:.5rem; margin:1rem 0}
    .question{margin:1rem 0; padding:.8rem; border-radius:12px; background:#f9fafb; border:1px solid #e5e7eb}
    .question p{margin:.2rem 0 .5rem; font-weight:600}
    .option{
      display:flex; align-items:center; gap:.55rem;
      padding:.55rem .7rem; margin:.35rem 0;
      border:1px solid #dae1e7; border-radius:10px; background:#fff;
      cursor:pointer; touch-action: manipulation;
    }
    .option input{width:22px; height:22px}
    .option.correct{border-color:var(--ok); background:#ecfdf5}
    .option.wrong{border-color:var(--bad); background:#fef2f2}

    /* Bot√≥n flotante volver a niveles */
    #volverNiveles{
      display:none;
      position:fixed; left:50%; transform:translateX(-50%);
      bottom:14px; z-index:1000;
      padding:.9rem 1.6rem; border-radius:14px;
      background:#28a745; color:#fff; border:none; font-weight:800;
      box-shadow:0 10px 16px rgba(0,0,0,.25);
      touch-action: manipulation;
    }
    #volverNiveles:active{transform:translateX(-50%) scale(.98)}

    /* Modal */
    .modal{display:none; position:fixed; inset:0; background:rgba(0,0,0,.55); z-index:1100;
      align-items:center; justify-content:center; padding:1rem}
    .modal-content{
      width:min(450px,92vw); background:#fff; border-radius:16px; padding:1.3rem; text-align:center;
      box-shadow:0 10px 24px rgba(0,0,0,.25)
    }
    .score{
      font-size:1.1rem; font-weight:700; margin:.6rem 0; color:#111
    }

    /* Accesibilidad y m√≥viles */
    @media (pointer:coarse){
      .btn, .option{padding:1rem}
      .option input{width:26px; height:26px}
      .level{padding:1.2rem .8rem}
    }
    @media (prefers-reduced-motion: reduce){
      *{transition:none !important}
    }
  </style>
</head>
<body>
  <header>
    <h1>Razonamiento Verbal ‚Äì Ciencias</h1>
    <p>Nutrici√≥n ‚Ä¢ Digestivo ‚Ä¢ Circulatorio ‚Ä¢ Respiratorio ‚Ä¢ Excretor</p>
  </header>

  <!-- Pantalla inicial -->
  <section id="inicio">
    <div class="card">
      <h2>Bienvenido</h2>
      <p>Lee el texto, responde 10 preguntas y aprueba con <b>70% o m√°s</b> para avanzar al siguiente nivel.</p>
      <p>Puedes usar <b>üîä Lectura en voz alta</b> si lo prefieres.</p>
      <button class="btn" onclick="irNiveles()">Comenzar</button>
    </div>
  </section>

  <!-- Vista de niveles -->
  <section id="levelsView">
    <h2>Selecciona un nivel</h2>
    <div class="levels" id="levels"></div>
    <button class="btn alt" onclick="location.href= '../index.html'" >üè† Volver al Men√∫ de Juegos</button>
  </section>

  <!-- Vista de preguntas -->
  <main id="content">
    <h2 id="levelTitle"></h2>
    <p id="text"></p>

    <div class="controls">
      <button class="btn" onclick="speakText()">üîä Leer</button>
      <button class="btn" onclick="pauseResume()">‚èØ Pausar/Reanudar</button>
      <button class="btn" onclick="stopReading()">‚èπ Detener</button>
    </div>

    <div id="questions"></div>
    <button class="btn" onclick="submitAnswers()">Enviar respuestas</button>
  </main>

  <!-- Bot√≥n flotante -->
  <button id="volverNiveles" onclick="volverANiveles()">‚¨Ö Volver a Niveles</button>

  <!-- Modal resultados -->
  <div class="modal" id="resultModal">
    <div class="modal-content">
      <h2 id="resultTitle">Resultado</h2>
      <p class="score" id="resultMessage"></p>
      <button class="btn" onclick="closeModal()">Cerrar</button>
    </div>
  </div>

  <script>
    /* =========================
       TEXTOS + 10 PREGUNTAS POR SISTEMA
       ========================= */
    const LEVELS = [
      /* 0 - NUTRICI√ìN */
      {
        name: "Nutrici√≥n",
        text:
`La nutrici√≥n es el proceso biol√≥gico por el cual los seres vivos obtienen, transforman y utilizan los nutrientes de los alimentos para obtener energ√≠a, construir y reparar tejidos, y regular funciones vitales. Incluye la ingesti√≥n, digesti√≥n, absorci√≥n, transporte, asimilaci√≥n y excreci√≥n. Una dieta equilibrada combina macronutrientes (carbohidratos, prote√≠nas y l√≠pidos) y micronutrientes (vitaminas y minerales). El equilibrio entre ingesta y gasto energ√©tico, junto con la calidad de los alimentos, condiciona la salud y el rendimiento f√≠sico e intelectual.`,
        questions: [
          { q:"La nutrici√≥n es, ante todo, un‚Ä¶", options:["Proceso biol√≥gico","Estilo de vida", "Programa deportivo"], answer:0 },
          { q:"Son macronutrientes:", options:["Carbohidratos, prote√≠nas y l√≠pidos","Vitaminas y minerales","Agua y fibra √∫nicamente"], answer:0 },
          { q:"Los probi√≥ticos son‚Ä¶", options:["Microorganismos beneficiosos para el intestino","Vitaminas que dan energ√≠a","Az√∫cares complejos"], answer:0 },
          { q:"¬øCu√°l es una vitamina liposoluble?", options:["Vitamina D","Vitamina C","Vitamina B1"], answer:0 },
          { q:"La funci√≥n principal de las prote√≠nas es‚Ä¶", options:["Formar y reparar tejidos","Aportar sabor","Almacenar agua"], answer:0 },
          { q:"La fibra diet√©tica se relaciona con‚Ä¶", options:["Mejor tr√°nsito intestinal","Producci√≥n de bilis","Aumento r√°pido de glucosa"], answer:0 },
          { q:"La absorci√≥n de hierro no hemo mejora con‚Ä¶", options:["Vitamina C","Sodio","Grasas saturadas"], answer:0 },
          { q:"Un ejemplo de carbohidrato complejo es‚Ä¶", options:["Avena","Az√∫car blanca","Miel"], answer:0 },
          { q:"Son grasas m√°s saludables para el coraz√≥n‚Ä¶", options:["Monoinsaturadas y omega-3","Trans y saturadas","Hidrogenadas"], answer:0 },
          { q:"El balance energ√©tico depende de‚Ä¶", options:["Ingesta vs. gasto cal√≥rico","Cantidad de agua","Horas de sue√±o solamente"], answer:0 }
        ]
      },

      /* 1 - DIGESTIVO (10) */
      {
        name: "Sistema Digestivo",
        text:
`El sistema digestivo transforma los alimentos en mol√©culas simples aprovechables. La digesti√≥n inicia en la boca con la masticaci√≥n y la acci√≥n de enzimas salivales; contin√∫a en el est√≥mago con los jugos g√°stricos; y culmina en el intestino delgado, donde la mayor√≠a de nutrientes se absorbe hacia la sangre. El h√≠gado produce bilis (almacenada en ves√≠cula) que emulsiona grasas; y el p√°ncreas aporta enzimas que degradan prote√≠nas, l√≠pidos y carbohidratos.`,
        questions: [
          { pregunta: "¬øD√≥nde comienza la digesti√≥n de los carbohidratos?", opciones: ["Est√≥mago","Boca","Intestino delgado","H√≠gado"], respuesta: 1 },
          { pregunta: "¬øQu√© √≥rgano produce la bilis?", opciones: ["P√°ncreas","H√≠gado","Ves√≠cula","Est√≥mago"], respuesta: 1 },
          { pregunta: "¬øD√≥nde ocurre la mayor absorci√≥n de nutrientes?", opciones: ["Boca","Est√≥mago","Intestino delgado","Intestino grueso"], respuesta: 2 },
          { pregunta: "¬øQu√© √≥rgano almacena la bilis?", opciones: ["Ves√≠cula","Est√≥mago","H√≠gado","Intestino"], respuesta: 0 },
          { pregunta: "¬øQu√© enzima comienza a digerir carbohidratos?", opciones: ["Amilasa","Pepsina","Lipasa","Tripsina"], respuesta: 0 },
          { pregunta: "¬øQu√© √≥rgano absorbe agua y forma heces?", opciones: ["Intestino grueso","H√≠gado","Bazo","Est√≥mago"], respuesta: 0 },
          { pregunta: "¬øQu√© √≥rgano secreta √°cido clorh√≠drico?", opciones: ["Est√≥mago","Intestino","H√≠gado","Ri√±√≥n"], respuesta: 0 },
          { pregunta: "¬øQu√© √≥rgano transforma los nutrientes absorbidos?", opciones: ["H√≠gado","Coraz√≥n","Est√≥mago","Ves√≠cula"], respuesta: 0 },
          { pregunta: "¬øQu√© parte del intestino tiene vellosidades?", opciones: ["Delgado","Grueso","Recto","Duodeno"], respuesta: 0 },
          { pregunta: "¬øQu√© √≥rgano produce enzimas digestivas?", opciones: ["P√°ncreas","Ri√±√≥n","Coraz√≥n","H√≠gado"], respuesta: 0 }
        ].map(mapOldSchema)
      },

      /* 2 - CIRCULATORIO (10) */
      {
        name: "Sistema Circulatorio",
        text:
`El sistema circulatorio distribuye ox√≠geno y nutrientes a las c√©lulas y recoge di√≥xido de carbono y desechos. El coraz√≥n bombea sangre a trav√©s de arterias, venas y capilares. La sangre tambi√©n transporta hormonas y colabora en la regulaci√≥n t√©rmica y del pH, manteniendo la homeostasis.`,
        questions: [
          { pregunta: "¬øCu√°l es el √≥rgano principal del sistema circulatorio?", opciones: ["Pulmones","Coraz√≥n","H√≠gado","Cerebro"], respuesta: 1 },
          { pregunta: "¬øQu√© vasos llevan sangre del coraz√≥n al cuerpo?", opciones: ["Venas","Arterias","Capilares","V√©nulas"], respuesta: 1 },
          { pregunta: "¬øQu√© c√©lula transporta ox√≠geno?", opciones: ["Gl√≥bulos blancos","Plaquetas","Gl√≥bulos rojos","Plasma"], respuesta: 2 },
          { pregunta: "¬øQu√© lado del coraz√≥n bombea sangre a los pulmones?", opciones: ["Derecho","Izquierdo","Ambos","Ninguno"], respuesta: 0 },
          { pregunta: "¬øQu√© divide el coraz√≥n en dos mitades?", opciones: ["Aur√≠culas","Ventr√≠culos","Tabique","Diafragma"], respuesta: 2 },
          { pregunta: "¬øQu√© vasos devuelven sangre al coraz√≥n?", opciones: ["Arterias","Venas","Capilares","Arteriolas"], respuesta: 1 },
          { pregunta: "¬øC√≥mo se llama la sangre pobre en ox√≠geno?", opciones: ["Sangre arterial","Sangre venosa","Sangre roja","Sangre rica"], respuesta: 1 },
          { pregunta: "¬øQu√© transporta el plasma?", opciones: ["Glucosa","Hormonas","Prote√≠nas","Todo lo anterior"], respuesta: 3 },
          { pregunta: "¬øQu√© cavidades reciben la sangre en el coraz√≥n?", opciones: ["Aur√≠culas","Ventr√≠culos","Arterias","Capilares"], respuesta: 0 },
          { pregunta: "¬øQu√© presi√≥n mide el coraz√≥n al latir?", opciones: ["Diast√≥lica","Sist√≥lica","Pulmonar","Arterial"], respuesta: 1 }
        ].map(mapOldSchema)
      },

      /* 3 - RESPIRATORIO (10) */
      {
        name: "Sistema Respiratorio",
        text:
`El sistema respiratorio permite el intercambio gaseoso: el ox√≠geno ingresa al organismo y el di√≥xido de carbono se expulsa. El aire entra por nariz o boca, pasa por faringe, laringe y tr√°quea hasta los pulmones. En los alv√©olos, fin√≠simos sacos, se realiza el intercambio con la sangre, proceso asistido por el diafragma.`,
        questions: [
          { pregunta: "¬øCu√°l es el √≥rgano principal de la respiraci√≥n?", opciones: ["Coraz√≥n","Pulmones","H√≠gado","Est√≥mago"], respuesta: 1 },
          { pregunta: "¬øPor d√≥nde entra el aire?", opciones: ["Pulmones","Tr√°quea","Nariz y boca","Diafragma"], respuesta: 2 },
          { pregunta: "¬øD√≥nde ocurre el intercambio gaseoso?", opciones: ["Bronquios","Alv√©olos","Diafragma","Faringe"], respuesta: 1 },
          { pregunta: "¬øQu√© m√∫sculo ayuda en la respiraci√≥n?", opciones: ["Diafragma","Coraz√≥n","Lengua","Es√≥fago"], respuesta: 0 },
          { pregunta: "¬øQu√© gas se elimina al respirar?", opciones: ["Ox√≠geno","CO‚ÇÇ","Nitr√≥geno","Hidr√≥geno"], respuesta: 1 },
          { pregunta: "¬øQu√© parte conecta la nariz con los pulmones?", opciones: ["Es√≥fago","Tr√°quea","Laringe","Bronquiolos"], respuesta: 1 },
          { pregunta: "¬øD√≥nde est√°n los bronquios?", opciones: ["En el coraz√≥n","En los pulmones","En el est√≥mago","En el h√≠gado"], respuesta: 1 },
          { pregunta: "¬øQu√© estructura evita que los alimentos entren en la tr√°quea?", opciones: ["Epiglotis","Lengua","Nariz","Diafragma"], respuesta: 0 },
          { pregunta: "¬øQu√© gas es esencial para la respiraci√≥n?", opciones: ["CO‚ÇÇ","Ox√≠geno","Nitr√≥geno","Helio"], respuesta: 1 },
          { pregunta: "¬øQu√© recubre los pulmones?", opciones: ["Peritoneo","Pleura","Meninges","Diafragma"], respuesta: 1 }
        ].map(mapOldSchema)
      },

      /* 4 - EXCRETOR (10) */
      {
        name: "Sistema Excretor",
        text:
`El sistema excretor elimina desechos y regula el equilibrio de agua, sales y pH. Los ri√±ones filtran la sangre y forman orina, que pasa por los ur√©teres hasta la vejiga, donde se almacena y luego se expulsa por la uretra. Tambi√©n participa en funciones hormonales como la producci√≥n de eritropoyetina.`,
        questions: [
          { pregunta: "¬øCu√°l es el √≥rgano principal del sistema excretor?", opciones: ["Pulmones","Ri√±ones","H√≠gado","Coraz√≥n"], respuesta: 1 },
          { pregunta: "¬øQu√© l√≠quido eliminan los ri√±ones?", opciones: ["Sudor","Orina","Sangre","Plasma"], respuesta: 1 },
          { pregunta: "¬øQu√© filtra la sangre en los ri√±ones?", opciones: ["Nefronas","Alv√©olos","Plaquetas","Aur√≠culas"], respuesta: 0 },
          { pregunta: "¬øQu√© almacena la vejiga?", opciones: ["Orina","Sangre","Ox√≠geno","Glucosa"], respuesta: 0 },
          { pregunta: "¬øPor d√≥nde se expulsa la orina?", opciones: ["Ur√©teres","Intestino","Uretra","Ves√≠cula"], respuesta: 2 },
          { pregunta: "¬øQu√© conecta ri√±ones con la vejiga?", opciones: ["Venas","Ur√©teres","Uretra","Arterias"], respuesta: 1 },
          { pregunta: "¬øQu√© regula la cantidad de agua en el cuerpo?", opciones: ["Pulmones","Ri√±ones","Est√≥mago","Coraz√≥n"], respuesta: 1 },
          { pregunta: "¬øQu√© √≥rgano tambi√©n ayuda eliminando toxinas?", opciones: ["H√≠gado","Coraz√≥n","Bazo","Est√≥mago"], respuesta: 0 },
          { pregunta: "¬øQu√© sustancia da color a la orina?", opciones: ["Bilirrubina","Urea","Glucosa","√Åcido √∫rico"], respuesta: 1 },
          { pregunta: "¬øD√≥nde se produce la orina?", opciones: ["Intestino","Nefronas","Vejiga","Pulmones"], respuesta: 1 }
        ].map(mapOldSchema)
      }
    ];

    // Convierte {pregunta, opciones, respuesta} a {q, options, answer}
    function mapOldSchema(item){
      return { q:item.pregunta, options:item.opciones, answer:item.respuesta };
    }

    // ========= Referencias DOM =========
    const inicio = document.getElementById("inicio");
    const levelsView = document.getElementById("levelsView");
    const levelsContainer = document.getElementById("levels");
    const content = document.getElementById("content");
    const textEl = document.getElementById("text");
    const levelTitle = document.getElementById("levelTitle");
    const questionsEl = document.getElementById("questions");
    const modal = document.getElementById("resultModal");
    const resultTitle = document.getElementById("resultTitle");
    const resultMessage = document.getElementById("resultMessage");
    const volverNivelesBtn = document.getElementById("volverNiveles");

    // ========= Estado =========
    let currentLevel = 0;
    let voices = [];
    let utterance;
    let progress = JSON.parse(localStorage.getItem("verbalProgress2")) || { unlocked: 1 };

    // ========= Navegaci√≥n =========
    function irNiveles(){
      inicio.style.display = "none";
      levelsView.style.display = "block";
      renderLevels();
    }
    function volverANiveles(){
      stopReading();
      content.style.display = "none";
      volverNivelesBtn.style.display = "none";
      levelsView.style.display = "block";
      window.scrollTo({top:0, behavior:"smooth"});
    }

    function renderLevels(){
      levelsContainer.innerHTML = "";
      LEVELS.forEach((lvl, i)=>{
        const div = document.createElement("div");
        div.className = "level";
        div.innerHTML = `${i+1}<br><small>${lvl.name}</small>`;
        if (i+1 > progress.unlocked){
          div.classList.add("locked");
        }else{
          div.onclick = ()=> loadLevel(i);
        }
        levelsContainer.appendChild(div);
      });
    }

    function loadLevel(i){
      currentLevel = i;
      levelsView.style.display = "none";
      content.style.display = "block";
      volverNivelesBtn.style.display = "inline-block";

      levelTitle.textContent = `Nivel ${i+1}: ${LEVELS[i].name}`;
      textEl.textContent = LEVELS[i].text;

      // Render preguntas
      questionsEl.innerHTML = "";
      LEVELS[i].questions.forEach((q, idx)=>{
        const wrap = document.createElement("div");
        wrap.className = "question";
        const p = document.createElement("p");
        p.textContent = `${idx+1}. ${q.q}`;
        wrap.appendChild(p);

        q.options.forEach((opt, j)=>{
          const label = document.createElement("label");
          label.className = "option";
          label.setAttribute("for", `q${idx}_${j}`);

          const input = document.createElement("input");
          input.type = "radio";
          input.name = `q${idx}`;
          input.id = `q${idx}_${j}`;
          input.value = j;

          label.appendChild(input);
          label.appendChild(document.createTextNode(opt));
          // Aumenta el √°rea t√°ctil
          label.addEventListener("click", ()=> input.focus(), {passive:true});
          wrap.appendChild(label);
        });

        questionsEl.appendChild(wrap);
      });

      window.scrollTo({top:0, behavior:"smooth"});
    }

    // ========= Correcci√≥n =========
    function submitAnswers(){
      stopReading();

      let correct = 0;
      const qs = LEVELS[currentLevel].questions;

      // Limpiar estilos anteriores
      document.querySelectorAll(".option").forEach(el=>{
        el.classList.remove("correct","wrong");
      });

      qs.forEach((q, idx)=>{
        const selected = document.querySelector(`input[name="q${idx}"]:checked`);
        const options = document.querySelectorAll(`input[name="q${idx}"]`);
        if (selected && parseInt(selected.value) === q.answer) correct++;

        // Pintar visualmente correcto/incorrecto
        options.forEach(opt=>{
          const label = opt.parentElement;
          const val = parseInt(opt.value);
          if (val === q.answer){
            label.classList.add("correct");
          }else if (selected && opt === selected && val !== q.answer){
            label.classList.add("wrong");
          }
        });
      });

      const scorePct = Math.round((correct / qs.length) * 100);
      const aprobado = scorePct >= 70;

      resultTitle.textContent = aprobado ? "‚úÖ Aprobado" : "‚ùå No aprobado";
      resultMessage.textContent = `Respuestas correctas: ${correct}/${qs.length} ‚Äî Puntaje: ${scorePct}%`;
      modal.style.display = "flex";

      if (aprobado){
        if (progress.unlocked < currentLevel + 2){
          progress.unlocked = currentLevel + 2;
          localStorage.setItem("verbalProgress2", JSON.stringify(progress));
        }
        // Avance autom√°tico tras 2s
        setTimeout(()=>{
          closeModal();
          if (currentLevel + 1 < LEVELS.length){
            loadLevel(currentLevel + 1);
          }else{
            volverANiveles();
          }
        }, 2000);
      }else{
        renderLevels();
      }
    }

    function closeModal(){ modal.style.display = "none"; }

    // ========= Lectura en voz =========
    function loadVoices(){ voices = speechSynthesis.getVoices(); }
    window.speechSynthesis.onvoiceschanged = loadVoices;

    function speakText(){
      stopReading();
      utterance = new SpeechSynthesisUtterance(textEl.textContent);
      utterance.lang = "es-ES";
      const es = speechSynthesis.getVoices().filter(v=>v.lang.startsWith("es"));
      if (es.length) utterance.voice = es[0];
      speechSynthesis.speak(utterance);
    }
    function pauseResume(){
      if (!speechSynthesis.speaking) return;
      if (speechSynthesis.paused) speechSynthesis.resume();
      else speechSynthesis.pause();
    }
    function stopReading(){
      if (speechSynthesis.speaking) speechSynthesis.cancel();
    }

    // ========= Inicio =========
    renderLevels();
  </script>
</body>
</html>



